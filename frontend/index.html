<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Void - 3D Solar System</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: #000000;
            color: #ffffff;
            overflow: hidden;
            height: 100vh;
        }

        #info-panel {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 300px;
            z-index: 1000;
        }

        #info-panel h2 {
            color: #4facfe;
            margin-bottom: 10px;
        }

        #info-panel p {
            margin-bottom: 8px;
            font-size: 14px;
        }

        #controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 1000;
        }

        #controls h3 {
            color: #4facfe;
            margin-bottom: 15px;
        }

        #loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #4facfe;
            font-size: 24px;
            z-index: 1000;
        }

        #canvas-container {
            width: 100vw;
            height: 100vh;
        }

        /* Hover info bubble */
        .hover-info {
            position: fixed;
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid #00ff00;
            border-radius: 10px;
            padding: 15px;
            color: white;
            font-size: 14px;
            max-width: 250px;
            z-index: 2000;
            pointer-events: none;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
            backdrop-filter: blur(10px);
        }

        .hover-info h3 {
            color: #00ff00;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .hover-info p {
            margin-bottom: 5px;
            line-height: 1.4;
        }

        /* Layer controls for future use */
        #layers-panel {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 1000;
        }

        #layers-panel h3 {
            color: #4facfe;
            margin-bottom: 15px;
        }

        .layer-item {
            margin-bottom: 10px;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            border-left: 3px solid #00ff00;
        }

        .layer-item.disabled {
            opacity: 0.5;
            border-left-color: #666;
        }

        .layer-item label {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .layer-item input[type="checkbox"] {
            margin-right: 10px;
        }

        /* Object labels */
        .object-label {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            white-space: nowrap;
            pointer-events: none;
            z-index: 1000;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
    </style>
</head>
<body>
    <div id="loading">Loading Solar System...</div>
    
    <div id="info-panel">
        <h2>Solar System Info</h2>
        <p><strong>Selected:</strong> <span id="selected-object">None</span></p>
        <p><strong>Distance:</strong> <span id="distance">0</span> AU</p>
        <p><strong>Type:</strong> <span id="object-type">-</span></p>
        <p><strong>Radius:</strong> <span id="radius">-</span></p>
        <p><strong>Mass:</strong> <span id="mass">-</span></p>
        <p><strong>Description:</strong> <span id="description">-</span></p>
    </div>

    <div id="controls">
        <h3>Camera</h3>
        <button onclick="resetCamera()" style="width: 100%; padding: 10px; background: #4facfe; border: none; border-radius: 5px; color: white; cursor: pointer;">Reset Camera</button>
    </div>

    <div id="layers-panel">
        <h3>Layers</h3>
        <div class="layer-item">
            <label>
                <input type="checkbox" checked> Planets & Sun
            </label>
        </div>
        <div class="layer-item">
            <label>
                <input type="checkbox" checked> Orbital Paths
            </label>
        </div>
        <div class="layer-item disabled">
            <label>
                <input type="checkbox" disabled> Moons & Satellites
            </label>
        </div>
        <div class="layer-item disabled">
            <label>
                <input type="checkbox" disabled> Asteroid Belts
            </label>
        </div>
        <div class="layer-item disabled">
            <label>
                <input type="checkbox" disabled> Annotations & Labels
            </label>
        </div>
        <div class="layer-item disabled">
            <label>
                <input type="checkbox" disabled> Constellation Lines
            </label>
        </div>
        <p style="font-size: 12px; color: #888; margin-top: 15px;">
            üí° <strong>Future Feature:</strong> Toggle layers on/off for different visualization modes
        </p>
    </div>

    <div id="canvas-container"></div>

    <!-- Hover info bubble -->
    <div id="hover-info" class="hover-info" style="display: none;">
        <h3 id="hover-title">Object Name</h3>
        <p id="hover-type">Type: Planet</p>
        <p id="hover-distance">Distance: 1.0 AU</p>
        <p id="hover-size">Size: 6,371 km</p>
        <p id="hover-mass">Mass: 5.97 √ó 10¬≤‚Å¥ kg</p>
        <p id="hover-orbital">Orbital Period: 365.25 days</p>
    </div>

    <script>
        // Solar system data
        const solarSystemData = {
            "sun": {
                "name": "Sun",
                "type": "star",
                "distance": 0,
                "radius": 696340,
                "mass": 1.989e30,
                "color": 0xFFD700,
                "description": "Our star, a yellow dwarf star that provides light and energy to the solar system.",
                "rotation_period": 25.05,
                "orbital_period": 0,
                "inclination": 0.0,
                "eccentricity": 0.0
            },
            "planets": [
                {
                    "name": "Mercury",
                    "type": "planet",
                    "distance": 0.387,
                    "radius": 2439.7,
                    "mass": 3.285e23,
                    "color": 0xA0522D,
                    "description": "The smallest and innermost planet in the Solar System.",
                    "rotation_period": 58.6,
                    "orbital_period": 88.0,
                    "inclination": 7.0,
                    "eccentricity": 0.205
                },
                {
                    "name": "Venus",
                    "type": "planet",
                    "distance": 0.723,
                    "radius": 6051.8,
                    "mass": 4.867e24,
                    "color": 0xE6E6FA,
                    "description": "The second planet from the Sun, often called Earth's sister planet.",
                    "rotation_period": -243.0,
                    "orbital_period": 224.7,
                    "inclination": 3.4,
                    "eccentricity": 0.007
                },
                {
                    "name": "Earth",
                    "type": "planet",
                    "distance": 1.0,
                    "radius": 6371,
                    "mass": 5.972e24,
                    "color": 0x4B9CD3,
                    "description": "Our home planet, the third planet from the Sun and the only known planet with life.",
                    "rotation_period": 1.0,
                    "orbital_period": 365.25,
                    "inclination": 0.0,
                    "eccentricity": 0.017
                },
                {
                    "name": "Mars",
                    "type": "planet",
                    "distance": 1.524,
                    "radius": 3389.5,
                    "mass": 6.39e23,
                    "color": 0xCD5C5C,
                    "description": "The fourth planet from the Sun, known as the Red Planet.",
                    "rotation_period": 1.03,
                    "orbital_period": 687.0,
                    "inclination": 1.9,
                    "eccentricity": 0.093
                },
                {
                    "name": "Jupiter",
                    "type": "planet",
                    "distance": 5.203,
                    "radius": 69911,
                    "mass": 1.898e27,
                    "color": 0xFAD5A5,
                    "description": "The largest planet in the Solar System, a gas giant.",
                    "rotation_period": 0.41,
                    "orbital_period": 4333.0,
                    "inclination": 1.3,
                    "eccentricity": 0.048
                },
                {
                    "name": "Saturn",
                    "type": "planet",
                    "distance": 9.537,
                    "radius": 58232,
                    "mass": 5.683e26,
                    "color": 0xFAD5A5,
                    "description": "The sixth planet from the Sun, famous for its spectacular ring system.",
                    "rotation_period": 0.45,
                    "orbital_period": 10759.0,
                    "inclination": 2.5,
                    "eccentricity": 0.054
                },
                {
                    "name": "Uranus",
                    "type": "planet",
                    "distance": 19.191,
                    "radius": 25362,
                    "mass": 8.681e25,
                    "color": 0xB8E6B8,
                    "description": "The seventh planet from the Sun, an ice giant with a tilted axis.",
                    "rotation_period": -0.72,
                    "orbital_period": 30687.0,
                    "inclination": 0.8,
                    "eccentricity": 0.047
                },
                {
                    "name": "Neptune",
                    "type": "planet",
                    "distance": 30.069,
                    "radius": 6371,
                    "mass": 1.024e26,
                    "color": 0x4B70DD,
                    "description": "The eighth and farthest known planet from the Sun, an ice giant.",
                    "rotation_period": 0.67,
                    "orbital_period": 60190.0,
                    "inclination": 1.8,
                    "eccentricity": 0.009
                }
            ]
        };

        // Three.js variables
        let scene, camera, renderer, controls;
        let celestialBodies = {};
        let orbits = {};
        let hoverRings = {};
        let selectedObject = null;
        let hoveredObject = null;

        // Initialize the scene
        function init() {
            try {
                // Create scene
                scene = new THREE.Scene();
                scene.background = new THREE.Color(0x000011);

                // Create camera
                camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                camera.position.set(0, 50, 100);

                // Create renderer
                renderer = new THREE.WebGLRenderer({ antialias: true });
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.shadowMap.enabled = true;
                renderer.shadowMap.type = THREE.PCFSoftShadowMap;
                document.getElementById('canvas-container').appendChild(renderer.domElement);

                // Add controls
                controls = new THREE.OrbitControls(camera, renderer.domElement);
                controls.enableDamping = true;
                controls.dampingFactor = 0.05;

                // Add ambient light - increased for better visibility
                const ambientLight = new THREE.AmbientLight(0x606060, 0.8);
                scene.add(ambientLight);

                // Add directional light (sun) - increased intensity
                const sunLight = new THREE.DirectionalLight(0xffffff, 2.0);
                sunLight.position.set(0, 0, 0);
                sunLight.castShadow = true;
                sunLight.shadow.mapSize.width = 2048;
                sunLight.shadow.mapSize.height = 2048;
                scene.add(sunLight);

                // Add additional fill light for better object visibility
                const fillLight = new THREE.DirectionalLight(0xffffff, 0.5);
                fillLight.position.set(50, 50, 50);
                scene.add(fillLight);

                // Create celestial bodies
                createCelestialBodies();
                
                // Create orbits
                createOrbits();
                
                // Create hover rings
                createHoverRings();

                // Set up event listeners AFTER everything is created
                setupEventListeners();

                // Hide loading screen
                document.getElementById('loading').style.display = 'none';

                // Start animation loop
                animate();
                
            } catch (error) {
                console.error("Error during initialization:", error);
                document.getElementById('loading').innerHTML = `Error: ${error.message}<br><br>Check console for details.`;
            }
        }

        function setupEventListeners() {
            // Add keyboard shortcut for developer tools
            window.addEventListener('keydown', function(event) {
                // F12 key or Cmd+Option+I (Mac) or Ctrl+Shift+I (Windows/Linux)
                if (event.key === 'F12' || 
                    (event.metaKey && event.altKey && event.key === 'i') ||
                    (event.ctrlKey && event.shiftKey && event.key === 'I')) {
                    console.log('Developer tools shortcut pressed');
                    // This will help users open dev tools
                }
            });

            // Fix right-click context menu
            renderer.domElement.addEventListener('contextmenu', function(event) {
                event.preventDefault();
                console.log('Right-click detected - opening context menu');
                // Create a simple context menu
                showContextMenu(event);
            });

            // Add mouse event listeners
            window.addEventListener('mousemove', onMouseMove, false);
            window.addEventListener('click', onMouseClick, false);
            
            // Handle window resize
            window.addEventListener('resize', onWindowResize, false);
        }

        function createCelestialBodies() {
            try {
                // Clear any existing celestial bodies
                celestialBodies = {};
                
                // Create Sun with normal appearance
                const sunGeometry = new THREE.SphereGeometry(5, 32, 32);
                const sunMaterial = new THREE.MeshBasicMaterial({ 
                    color: 0xFFD700
                });
                const sun = new THREE.Mesh(sunGeometry, sunMaterial);
                sun.position.set(0, 0, 0);
                sun.castShadow = false;
                sun.receiveShadow = false;
                sun.name = "Sun";
                scene.add(sun);
                
                // Store sun data
                celestialBodies.sun = {
                    mesh: sun,
                    data: solarSystemData.sun,
                    angle: 0
                };

                // Create planets with enhanced visuals
                solarSystemData.planets.forEach((planetData, index) => {
                    try {
                        // Create unique geometry and material for each planet
                        const planetGeometry = new THREE.SphereGeometry(
                            Math.max(1.0, Math.log(planetData.radius) * 0.5), 
                            32, 
                            32
                        );
                        
                        const planetMaterial = new THREE.MeshLambertMaterial({ 
                            color: planetData.color,
                            emissive: new THREE.Color(planetData.color).multiplyScalar(0.1)
                        });
                        
                        const planet = new THREE.Mesh(planetGeometry, planetMaterial);
                        planet.name = planetData.name;
                        
                        // Position planet
                        const distance = planetData.distance * 20;
                        planet.position.set(distance, 0, 0);
                        planet.castShadow = true;
                        planet.receiveShadow = true;
                        
                        scene.add(planet);
                        
                        // Store planet data with lowercase key
                        const planetKey = planetData.name.toLowerCase();
                        celestialBodies[planetKey] = {
                            mesh: planet,
                            data: planetData,
                            angle: Math.random() * Math.PI * 2,
                            distance: distance
                        };
                        
                    } catch (planetError) {
                        console.error(`Error creating planet ${planetData.name}:`, planetError);
                    }
                });
                
            } catch (error) {
                console.error("Error in createCelestialBodies:", error);
                throw error;
            }
        }

        function createOrbits() {
            solarSystemData.planets.forEach(planetData => {
                const orbitGeometry = new THREE.RingGeometry(
                    planetData.distance * 20 - 0.1,
                    planetData.distance * 20 + 0.1,
                    64
                );
                const orbitMaterial = new THREE.MeshBasicMaterial({ 
                    color: 0x666666,
                    side: THREE.DoubleSide,
                    transparent: true,
                    opacity: 0.4
                });
                const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
                orbit.rotation.x = -Math.PI / 2;
                scene.add(orbit);
                
                orbits[planetData.name.toLowerCase()] = orbit;
            });
        }

        function createHoverRings() {
            // Create 2D silhouette outlines for hover effects
            Object.keys(celestialBodies).forEach(bodyName => {
                const body = celestialBodies[bodyName];
                
                // Create a slightly larger sphere for the outline
                let outlineSize;
                if (bodyName === 'sun') {
                    // Sun gets a fixed size outline (5 * 1.03 = 5.15)
                    outlineSize = 5 * 1.03;
                } else {
                    // Planets use the logarithmic calculation
                    outlineSize = Math.max(1.0, Math.log(body.data.radius) * 0.5) * 1.03;
                }
                
                const outlineGeometry = new THREE.SphereGeometry(outlineSize, 32, 32);
                
                // Create a bright green outline material that only shows the edges
                const outlineMaterial = new THREE.MeshBasicMaterial({
                    color: 0x00ff00,
                    transparent: true,
                    opacity: 0.8,
                    side: THREE.BackSide, // Use BackSide for 2D silhouette effect
                    depthTest: false
                });
                
                const outline = new THREE.Mesh(outlineGeometry, outlineMaterial);
                outline.visible = false;
                outline.name = `Outline_${bodyName}`;
                
                // Position outline at the same position as the body
                outline.position.copy(body.mesh.position);
                
                // Add outline directly to the scene (not as a child)
                scene.add(outline);
                
                // Store reference to outline and its target body
                hoverRings[bodyName] = {
                    outline: outline,
                    targetBody: body
                };
            });
        }

        function animate() {
            requestAnimationFrame(animate);

            // Update planet positions
            Object.values(celestialBodies).forEach(body => {
                if (body.data.type === 'planet') {
                    // Update orbital position
                    body.angle += 0.01 / body.data.orbital_period;
                    const x = Math.cos(body.angle) * body.distance;
                    const z = Math.sin(body.angle) * body.distance;
                    body.mesh.position.set(x, 0, z);

                    // Rotate planet on its axis
                    body.mesh.rotation.y += 0.01 / body.data.rotation_period;
                }
            });

            // Update outline positions to follow their target bodies
            Object.values(hoverRings).forEach(ringData => {
                if (ringData.outline.visible) {
                    ringData.outline.position.copy(ringData.targetBody.mesh.position);
                }
            });

            // Update controls
            controls.update();

            // Render scene
            renderer.render(scene, camera);
        }

        // Handle window resize
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function resetCamera() {
            camera.position.set(0, 50, 100);
            controls.reset();
        }

        // Mouse event handling
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();
        const hoverInfo = document.getElementById('hover-info');

        function onMouseMove(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(scene.children, true);

            // Hide previous hover effects
            if (hoveredObject && hoveredObject !== selectedObject) {
                const ringData = hoverRings[hoveredObject];
                if (ringData && ringData.outline) {
                    ringData.outline.material.opacity = 0;
                    ringData.outline.visible = false;
                }
            }

            if (intersects.length > 0) {
                const intersectedObject = intersects[0].object;
                
                // Find which celestial body was intersected
                let foundBody = null;
                Object.entries(celestialBodies).forEach(([name, body]) => {
                    if (body.mesh === intersectedObject || body.mesh.children.includes(intersectedObject)) {
                        foundBody = { name, body };
                    }
                });

                if (foundBody && foundBody.body !== selectedObject) {
                    hoveredObject = foundBody.name;
                    
                    // Show green outline
                    const ringData = hoverRings[foundBody.name];
                    if (ringData && ringData.outline) {
                        ringData.outline.material.opacity = 1.0;
                        ringData.outline.visible = true;
                    }

                    // Show hover info
                    showHoverInfo(foundBody.body, event);
                } else {
                    hoveredObject = null;
                    hideHoverInfo();
                }
            } else {
                hoveredObject = null;
                hideHoverInfo();
            }
        }

        function onMouseClick(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(scene.children, true);

            if (intersects.length > 0) {
                const intersectedObject = intersects[0].object;
                console.log("Clicked object:", intersectedObject);
                
                // Find which celestial body was clicked
                Object.entries(celestialBodies).forEach(([name, body]) => {
                    if (body.mesh === intersectedObject || body.mesh.children.includes(intersectedObject)) {
                        console.log(`Selected: ${name}`);
                        selectObject(name, body);
                    }
                });
            }
        }

        function showHoverInfo(body, event) {
            try {
                if (!body || !body.data) {
                    console.error("Invalid body or body.data in showHoverInfo:", body);
                    return;
                }
                
                hoverInfo.style.display = 'block';
                hoverInfo.style.left = (event.clientX + 15) + 'px';
                hoverInfo.style.top = (event.clientY - 15) + 'px';
                
                // Safely access data properties with fallbacks
                const name = body.data.name || 'Unknown';
                const type = body.data.type || 'Unknown';
                const distance = body.data.distance !== undefined ? body.data.distance.toFixed(3) : 'N/A';
                const radius = body.data.radius !== undefined ? (body.data.radius / 1000).toFixed(1) : 'N/A';
                const mass = body.data.mass !== undefined ? (body.data.mass / 1e24).toFixed(2) : 'N/A';
                const orbitalPeriod = body.data.orbital_period !== undefined ? body.data.orbital_period.toFixed(1) : 'N/A';
                
                document.getElementById('hover-title').textContent = name;
                document.getElementById('hover-type').textContent = `Type: ${type.charAt(0).toUpperCase() + type.slice(1)}`;
                document.getElementById('hover-distance').textContent = `Distance: ${distance} AU`;
                document.getElementById('hover-size').textContent = `Size: ${radius} km`;
                document.getElementById('hover-mass').textContent = `Mass: ${mass} √ó 10¬≤‚Å¥ kg`;
                document.getElementById('hover-orbital').textContent = `Orbital Period: ${orbitalPeriod} days`;
                
            } catch (error) {
                console.error("Error in showHoverInfo:", error);
            }
        }

        function hideHoverInfo() {
            hoverInfo.style.display = 'none';
        }

        function selectObject(name, body) {
            try {
                if (!body || !body.data) {
                    console.error("Invalid body or body.data in selectObject:", body);
                    return;
                }
                
                // Remove previous selection
                if (selectedObject) {
                    const prevRingData = hoverRings[selectedObject];
                    if (prevRingData && prevRingData.outline) {
                        prevRingData.outline.material.opacity = 0;
                        prevRingData.outline.visible = false;
                    }
                }
                
                // Select new object
                selectedObject = name;
                
                // Show selection outline
                const ringData = hoverRings[name];
                if (ringData && ringData.outline) {
                    ringData.outline.material.opacity = 1.0;
                    ringData.outline.visible = true;
                }
                
                // Update info panel with safe property access
                const data = body.data;
                document.getElementById('selected-object').textContent = data.name || 'Unknown';
                document.getElementById('distance').textContent = (data.distance !== undefined ? data.distance.toFixed(3) : 'N/A') + ' AU';
                document.getElementById('object-type').textContent = data.type || 'Unknown';
                document.getElementById('radius').textContent = (data.radius !== undefined ? (data.radius / 1000).toFixed(1) : 'N/A') + ' km';
                document.getElementById('mass').textContent = (data.mass !== undefined ? (data.mass / 1e24).toFixed(2) : 'N/A') + ' √ó 10¬≤‚Å¥ kg';
                document.getElementById('description').textContent = data.description || 'No description available';

                // Highlight selected object
                Object.values(celestialBodies).forEach(b => {
                    if (b.mesh && b.mesh.material && b.mesh.material.emissive) {
                        b.mesh.material.emissive = new THREE.Color(0x000000);
                    }
                });
                if (body.mesh && body.mesh.material && body.mesh.material.emissive) {
                    body.mesh.material.emissive = new THREE.Color(0x444444);
                }
                
            } catch (error) {
                console.error("Error in selectObject:", error);
            }
        }

        // Add event listeners
        // window.addEventListener('mousemove', onMouseMove, false);
        // window.addEventListener('click', onMouseClick, false);
        
        // Add keyboard shortcut for developer tools
        // window.addEventListener('keydown', function(event) {
        //     // F12 key or Cmd+Option+I (Mac) or Ctrl+Shift+I (Windows/Linux)
        //     if (event.key === 'F12' || 
        //         (event.metaKey && event.altKey && event.key === 'i') ||
        //         (event.ctrlKey && event.shiftKey && event.key === 'I')) {
        //         console.log('Developer tools shortcut pressed');
        //         // This will help users open dev tools
        //     }
        // });

        // Fix right-click context menu
        // renderer.domElement.addEventListener('contextmenu', function(event) {
        //     event.preventDefault();
        //     console.log('Right-click detected - opening context menu');
        //     // Create a simple context menu
        //     showContextMenu(event);
        // });

        function showContextMenu(event) {
            // Remove existing context menu
            const existingMenu = document.getElementById('context-menu');
            if (existingMenu) {
                existingMenu.remove();
            }
            
            // Create context menu
            const contextMenu = document.createElement('div');
            contextMenu.id = 'context-menu';
            contextMenu.style.cssText = `
                position: fixed;
                top: ${event.clientY}px;
                left: ${event.clientX}px;
                background: rgba(0, 0, 0, 0.9);
                border: 1px solid #4facfe;
                border-radius: 5px;
                padding: 10px;
                z-index: 10000;
                color: white;
                font-family: Arial, sans-serif;
                font-size: 14px;
            `;
            
            contextMenu.innerHTML = `
                <div style="margin-bottom: 10px; color: #4facfe; font-weight: bold;">Void Controls</div>
                <div style="margin-bottom: 5px; cursor: pointer; padding: 5px;" onclick="openDevTools()">üîß Open Developer Tools</div>
                <div style="margin-bottom: 5px; cursor: pointer; padding: 5px;" onclick="resetCamera()">üì∑ Reset Camera</div>
                <div style="margin-bottom: 5px; cursor: pointer; padding: 5px;" onclick="toggleDebugMode()">üêõ Toggle Debug Mode</div>
                <div style="cursor: pointer; padding: 5px;" onclick="hideContextMenu()">‚ùå Close</div>
            `;
            
            document.body.appendChild(contextMenu);
            
            // Hide menu when clicking elsewhere
            setTimeout(() => {
                document.addEventListener('click', hideContextMenu, { once: true });
            }, 100);
        }

        function hideContextMenu() {
            const contextMenu = document.getElementById('context-menu');
            if (contextMenu) {
                contextMenu.remove();
            }
        }

        function openDevTools() {
            console.log('Opening developer tools...');
            hideContextMenu();
            // Show instructions
            alert('To open Developer Tools:\n\nMac: Press Cmd+Option+I\nWindows/Linux: Press F12 or Ctrl+Shift+I\n\nThen check the Console tab for debug information.');
        }

        function toggleDebugMode() {
            console.log('Debug mode toggled');
            hideContextMenu();
            // Add debug visualization
            if (!window.debugMode) {
                window.debugMode = true;
                showDebugInfo();
            } else {
                window.debugMode = false;
                hideDebugInfo();
            }
        }

        function showDebugInfo() {
            // Create debug info panel
            const debugPanel = document.createElement('div');
            debugPanel.id = 'debug-panel';
            debugPanel.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: rgba(255, 0, 0, 0.9);
                color: white;
                padding: 15px;
                border-radius: 10px;
                z-index: 1000;
                font-family: monospace;
                font-size: 12px;
                max-width: 300px;
            `;
            
            debugPanel.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 10px;">üêõ DEBUG MODE</div>
                <div>Hover Rings: ${Object.keys(hoverRings).length}</div>
                <div>Celestial Bodies: ${Object.keys(celestialBodies).length}</div>
                <div>Scene Children: ${scene.children.length}</div>
                <div style="margin-top: 10px; font-size: 10px;">
                    Check console for detailed logs
                </div>
            `;
            
            document.body.appendChild(debugPanel);
        }

        function hideDebugInfo() {
            const debugPanel = document.getElementById('debug-panel');
            if (debugPanel) {
                debugPanel.remove();
            }
        }

        // Initialize when page loads
        window.addEventListener('load', init);
    </script>
</body>
</html> 